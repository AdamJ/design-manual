!function(a){var h,u,c,p,t,f,d,m,e,i,g=function(t){var e=new g.Index;return e.pipeline.add(g.stopWordFilter,g.stemmer),t&&t.call(e,e),e};g.version="0.4.3","undefined"!=typeof module&&(module.exports=g),g.utils={},g.utils.warn=(i=this,function(t){i.console&&console.warn&&console.warn(t)}),g.utils.zeroFillArray=(e=[0],function(t){for(;t>e.length;)e=e.concat(e);return e.slice(0,t)}),g.EventEmitter=function(){this.events={}},g.EventEmitter.prototype.addListener=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),i=t;if("function"!=typeof e)throw new TypeError("last argument must be a function");i.forEach(function(t){this.hasHandler(t)||(this.events[t]=[]),this.events[t].push(e)},this)},g.EventEmitter.prototype.removeListener=function(t,e){var i;this.hasHandler(t)&&(i=this.events[t].indexOf(e),this.events[t].splice(i,1),this.events[t].length||delete this.events[t])},g.EventEmitter.prototype.emit=function(t){var e;this.hasHandler(t)&&(e=Array.prototype.slice.call(arguments,1),this.events[t].forEach(function(t){t.apply(void 0,e)}))},g.EventEmitter.prototype.hasHandler=function(t){return t in this.events},g.tokenizer=function(t){if(!arguments.length||null==t||null==t)return[];if(Array.isArray(t))return t.map(function(t){return t.toLowerCase()});for(var e=(""+t).replace(/^\s+/,""),i=e.length-1;0<=i;i--)if(/\S/.test(e.charAt(i))){e=e.substring(0,i+1);break}return e.split(/\s+/).map(function(t){return t.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase()})},g.Pipeline=function(){this._stack=[]},g.Pipeline.registeredFunctions={},g.Pipeline.registerFunction=function(t,e){e in this.registeredFunctions&&g.utils.warn("Overwriting existing registered function: "+e),t.label=e,g.Pipeline.registeredFunctions[t.label]=t},g.Pipeline.warnIfFunctionNotRegistered=function(t){t.label&&t.label in this.registeredFunctions||g.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},g.Pipeline.load=function(t){var i=new g.Pipeline;return t.forEach(function(t){var e=g.Pipeline.registeredFunctions[t];if(!e)throw Error("Cannot load un-registered function: "+t);i.add(e)}),i},g.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(t){g.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},g.Pipeline.prototype.after=function(t,e){g.Pipeline.warnIfFunctionNotRegistered(e);var i=this._stack.indexOf(t)+1;this._stack.splice(i,0,e)},g.Pipeline.prototype.before=function(t,e){g.Pipeline.warnIfFunctionNotRegistered(e);var i=this._stack.indexOf(t);this._stack.splice(i,0,e)},g.Pipeline.prototype.remove=function(t){var e=this._stack.indexOf(t);this._stack.splice(e,1)},g.Pipeline.prototype.run=function(t){for(var e=[],i=t.length,n=this._stack.length,o=0;o<i;o++){for(var r=t[o],s=0;s<n&&void 0!==(r=this._stack[s](r,o,t));s++);void 0!==r&&e.push(r)}return e},g.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return g.Pipeline.warnIfFunctionNotRegistered(t),t.label})},g.Vector=function(t){this.elements=t},g.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t,e=0,i=this.elements,n=i.length,o=0;o<n;o++)e+=(t=i[o])*t;return this._magnitude=Math.sqrt(e)},g.Vector.prototype.dot=function(t){for(var e=this.elements,i=t.elements,n=e.length,o=0,r=0;r<n;r++)o+=e[r]*i[r];return o},g.Vector.prototype.similarity=function(t){return this.dot(t)/(this.magnitude()*t.magnitude())},g.Vector.prototype.toArray=function(){return this.elements},g.SortedSet=function(){this.length=0,this.elements=[]},g.SortedSet.load=function(t){var e=new this;return e.elements=t,e.length=t.length,e},g.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(t){~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t)},this),this.length=this.elements.length},g.SortedSet.prototype.toArray=function(){return this.elements.slice()},g.SortedSet.prototype.map=function(t,e){return this.elements.map(t,e)},g.SortedSet.prototype.forEach=function(t,e){return this.elements.forEach(t,e)},g.SortedSet.prototype.indexOf=function(t,e,i){var e=e||0,n=(i=i||this.elements.length)-e,o=e+Math.floor(n/2),r=this.elements[o];return n<=1?r===t?o:-1:r<t?this.indexOf(t,o,i):t<r?this.indexOf(t,e,o):r===t?o:void 0},g.SortedSet.prototype.locationFor=function(t,e,i){var e=e||0,n=(i=i||this.elements.length)-e,o=e+Math.floor(n/2),r=this.elements[o];if(n<=1){if(t<r)return o;if(r<t)return o+1}return r<t?this.locationFor(t,o,i):t<r?this.locationFor(t,e,o):void 0},g.SortedSet.prototype.intersect=function(t){for(var e=new g.SortedSet,i=0,n=0,o=this.length,r=t.length,s=this.elements,a=t.elements;!(o-1<i||r-1<n);)s[i]!==a[n]?s[i]<a[n]?i++:s[i]>a[n]&&n++:(e.add(s[i]),i++,n++);return e},g.SortedSet.prototype.clone=function(){var t=new g.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},g.SortedSet.prototype.union=function(t){var e,i=this.length>=t.length?(e=this,t):(e=t,this),n=e.clone();return n.add.apply(n,i.toArray()),n},g.SortedSet.prototype.toJSON=function(){return this.toArray()},g.Index=function(){this._fields=[],this._ref="id",this.pipeline=new g.Pipeline,this.documentStore=new g.Store,this.tokenStore=new g.TokenStore,this.corpusTokens=new g.SortedSet,this.eventEmitter=new g.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},g.Index.prototype.on=function(){var t=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,t)},g.Index.prototype.off=function(t,e){return this.eventEmitter.removeListener(t,e)},g.Index.load=function(t){t.version!==g.version&&g.utils.warn("version mismatch: current "+g.version+" importing "+t.version);var e=new this;return e._fields=t.fields,e._ref=t.ref,e.documentStore=g.Store.load(t.documentStore),e.tokenStore=g.TokenStore.load(t.tokenStore),e.corpusTokens=g.SortedSet.load(t.corpusTokens),e.pipeline=g.Pipeline.load(t.pipeline),e},g.Index.prototype.field=function(t,e){var i={name:t,boost:(e=e||{}).boost||1};return this._fields.push(i),this},g.Index.prototype.ref=function(t){return this._ref=t,this},g.Index.prototype.add=function(i,t){var n={},o=new g.SortedSet,e=i[this._ref],t=void 0===t||t;this._fields.forEach(function(t){var e=this.pipeline.run(g.tokenizer(i[t.name]));n[t.name]=e,g.SortedSet.prototype.add.apply(o,e)},this),this.documentStore.set(e,o),g.SortedSet.prototype.add.apply(this.corpusTokens,o.toArray());for(var r=0;o.length>r;r++){var s=o.elements[r],a=this._fields.reduce(function(t,e){var i=n[e.name].length;return i?t+n[e.name].filter(function(t){return t===s}).length/i*e.boost:t},0);this.tokenStore.add(s,{ref:e,tf:a})}t&&this.eventEmitter.emit("add",i,this)},g.Index.prototype.remove=function(t,e){var i,n=t[this._ref],e=void 0===e||e;this.documentStore.has(n)&&(i=this.documentStore.get(n),this.documentStore.remove(n),i.forEach(function(t){this.tokenStore.remove(t,n)},this),e&&this.eventEmitter.emit("remove",t,this))},g.Index.prototype.update=function(t,e){e=void 0===e||e;this.remove(t,!1),this.add(t,!1),e&&this.eventEmitter.emit("update",t,this)},g.Index.prototype.idf=function(t){if(this._idfCache[t])return this._idfCache[t];var e=this.tokenStore.count(t),i=1;return 0<e&&(i=1+Math.log(this.tokenStore.length/e)),this._idfCache[t]=i},g.Index.prototype.search=function(t){var e=this.pipeline.run(g.tokenizer(t)),u=g.utils.zeroFillArray(this.corpusTokens.length),n=[],o=this._fields.reduce(function(t,e){return t+e.boost},0);if(!e.some(function(t){return this.tokenStore.has(t)},this))return[];e.forEach(function(a,t,e){var l=1/e.length*this._fields.length*o,h=this,i=this.tokenStore.expand(a).reduce(function(t,e){var i,n=h.corpusTokens.indexOf(e),o=h.idf(e),r=1,s=new g.SortedSet;return e!==a&&(i=Math.max(3,e.length-a.length),r=1/Math.log(i)),-1<n&&(u[n]=l*o*r),Object.keys(h.tokenStore.get(e)).forEach(function(t){s.add(t)}),t.union(s)},new g.SortedSet);n.push(i)},this);var i=n.reduce(function(t,e){return t.intersect(e)}),r=new g.Vector(u);return i.map(function(t){return{ref:t,score:r.similarity(this.documentVector(t))}},this).sort(function(t,e){return e.score-t.score})},g.Index.prototype.documentVector=function(t){for(var e=this.documentStore.get(t),i=e.length,n=g.utils.zeroFillArray(this.corpusTokens.length),o=0;o<i;o++){var r=e.elements[o],s=this.tokenStore.get(r)[t].tf,a=this.idf(r);n[this.corpusTokens.indexOf(r)]=s*a}return new g.Vector(n)},g.Index.prototype.toJSON=function(){return{version:g.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},g.Store=function(){this.store={},this.length=0},g.Store.load=function(i){var t=new this;return t.length=i.length,t.store=Object.keys(i.store).reduce(function(t,e){return t[e]=g.SortedSet.load(i.store[e]),t},{}),t},g.Store.prototype.set=function(t,e){this.store[t]=e,this.length=Object.keys(this.store).length},g.Store.prototype.get=function(t){return this.store[t]},g.Store.prototype.has=function(t){return t in this.store},g.Store.prototype.remove=function(t){this.has(t)&&(delete this.store[t],this.length--)},g.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},g.stemmer=(h={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},u={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},d=(f="^("+(p="[^aeiou][^aeiouy]*")+")?"+(t=(c="[aeiouy]")+"[aeiou]*")+p)+t+p,m="^("+p+")?"+c,function(t){var e,i,n,o,r,s,a,l;return t.length<3||("y"==(i=t.substr(0,1))&&(t=i.toUpperCase()+t.substr(1)),a=/^(.+?)([^s])s$/,(r=/^(.+?)(ss|i)es$/).test(t)?t=t.replace(r,"$1$2"):a.test(t)&&(t=t.replace(a,"$1$2")),a=/^(.+?)(ed|ing)$/,(r=/^(.+?)eed$/).test(t)?(l=r.exec(t),(r=RegExp(f)).test(l[1])&&(r=/.$/,t=t.replace(r,""))):a.test(t)&&(s=(l=a.exec(t))[1],(a=RegExp(m)).test(s)&&(t=s,a=/(at|bl|iz)$/,n=RegExp("([^aeiouylsz])\\1$"),o=RegExp("^"+p+c+"[^aeiouwxy]$"),a.test(t)?t+="e":n.test(t)?(r=/.$/,t=t.replace(r,"")):o.test(t)&&(t+="e"))),(r=/^(.+?)y$/).test(t)&&(s=(l=r.exec(t))[1],(r=RegExp(m)).test(s)&&(t=s+"i")),(r=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/).test(t)&&(s=(l=r.exec(t))[1],e=l[2],(r=RegExp(f)).test(s)&&(t=s+h[e])),(r=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/).test(t)&&(s=(l=r.exec(t))[1],e=l[2],(r=RegExp(f)).test(s)&&(t=s+u[e])),a=/^(.+?)(s|t)(ion)$/,(r=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/).test(t)?(s=(l=r.exec(t))[1],(r=RegExp(d)).test(s)&&(t=s)):a.test(t)&&(s=(l=a.exec(t))[1]+l[2],(a=RegExp(d)).test(s)&&(t=s)),(r=/^(.+?)e$/).test(t)&&(s=(l=r.exec(t))[1],r=RegExp(d),a=RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),n=RegExp("^"+p+c+"[^aeiouwxy]$"),(r.test(s)||a.test(s)&&!n.test(s))&&(t=s)),r=/ll$/,a=RegExp(d),r.test(t)&&a.test(t)&&(r=/.$/,t=t.replace(r,"")),"y"==i&&(t=i.toLowerCase()+t.substr(1))),t}),g.Pipeline.registerFunction(g.stemmer,"stemmer"),g.stopWordFilter=function(t){return-1===g.stopWordFilter.stopWords.indexOf(t)?t:void 0},g.stopWordFilter.stopWords=new g.SortedSet,g.stopWordFilter.stopWords.length=119,g.stopWordFilter.stopWords.elements=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],g.Pipeline.registerFunction(g.stopWordFilter,"stopWordFilter"),g.TokenStore=function(){this.root={docs:{}},this.length=0},g.TokenStore.load=function(t){var e=new this;return e.root=t.root,e.length=t.length,e},g.TokenStore.prototype.add=function(t,e,i){var i=i||this.root,n=t[0],o=t.slice(1);return n in i||(i[n]={docs:{}}),0===o.length?(i[n].docs[e.ref]=e,void(this.length+=1)):this.add(o,e,i[n])},g.TokenStore.prototype.has=function(t){if(!t)return!1;for(var e=this.root,i=0;t.length>i;i++){if(!e[t[i]])return!1;e=e[t[i]]}return!0},g.TokenStore.prototype.getNode=function(t){if(!t)return{};for(var e=this.root,i=0;t.length>i;i++){if(!e[t[i]])return{};e=e[t[i]]}return e},g.TokenStore.prototype.get=function(t,e){return this.getNode(t,e).docs||{}},g.TokenStore.prototype.count=function(t,e){return Object.keys(this.get(t,e)).length},g.TokenStore.prototype.remove=function(t,e){if(t){for(var i=this.root,n=0;t.length>n;n++){if(!(t[n]in i))return;i=i[t[n]]}delete i.docs[e]}},g.TokenStore.prototype.expand=function(e,i){var t=this.getNode(e),n=t.docs||{},i=i||[];return Object.keys(n).length&&i.push(e),Object.keys(t).forEach(function(t){"docs"!==t&&i.concat(this.expand(e+t,i))},this),i},g.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},a.fn.camelHunter=function(t){var e=a.extend({},a.fn.camelHunter.defaults,t);if(e.results)return n.init(this,e),n};var n={isInit:!(a.fn.camelHunter.defaults={results:!1,rss:"/rss-alternate",onKeyUp:!0,result_template:"<li class='pf-c-data-list__item' aria-labelledby='results'><div class='pf-c-data-list__item-content'><div class='pf-c-data-list__cell'><div><b id='page-title'><a href='{{link}}' aria-label='{{title}}'>{{title}}</a></b><p>{{description}}</p></div></div></div></li>",info_template:"<h2>Number of pages found: {{amount}}</h2>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1}),init:function(e,t){var i=this;this.target=e,this.rss=t.rss,this.results=t.results,this.blogData=[],this.result_template=t.result_template,this.info_template=t.info_template,this.zeroResultsInfo=t.zeroResultsInfo,this.displaySearchInfo=t.displaySearchInfo,this.before=t.before,this.onComplete=t.onComplete,this.index=g(function(){this.field("title",{boost:10}),this.field("description"),this.field("link"),this.field("category"),this.field("pubDate"),this.ref("id")}),e.focus(function(){i.loadRSS()}),e.closest("form").submit(function(t){t.preventDefault(),i.find(e.val())}),t.onKeyUp&&(i.loadRSS(),e.keyup(function(){i.find(e.val())}))},loadRSS:function(){if(this.isInit)return!1;var r=this.index,t=this.rss,s=this.blogData;a.get(t,function(t){for(var e=a(t).find("item"),i=0;e&&i<e.length;i++){var n=e.eq(i),o={id:i+1,title:n.find("title").text(),description:n.find("description").text(),category:n.find("category").text(),pubDate:n.find("pubDate").text(),link:n.find("link").text()};r.add(o),s.push(o)}}),this.isInit=!0},find:function(t){var e=this.index.search(t),i=a(this.results),n=[];i.empty(),this.before&&this.before(),(this.zeroResultsInfo||0<e.length)&&this.displaySearchInfo&&i.append(this.format(this.info_template,{amount:e.length}));for(var o=0;o<e.length;o++){var r=this.blogData[e[o].ref-1];i.append(this.format(this.result_template,r)),n.push(r)}this.onComplete&&this.onComplete(n)},clear:function(){a(this.results).empty(),this.target.val("")},format:function(t,n){return t.replace(/{{([^{}]*)}}/g,function(t,e){var i=n[e];return"string"==typeof i||"number"==typeof i?i:t})}}}(jQuery);